import java.util.Scanner;
import java.io.*;

class Coordinate{
   public int c;
   public int r;
   public char type;    // the name of the chess

   public Coordinate(char type, int c, int r){
      this.type = type;
      this.c = c;
      this.r = r;
   }

   public boolean equals(Coordinate coord){
      return (c == coord.c && r == coord.r);
   }
}

class Link{
   public Coordinate data;
   public Link next;

   public Link(Coordinate coord){
      data = coord;
      next = null;
   }
}

class LinkedList{
   public Link first;
   public Coordinate gua_le;      // dead chess

   public LinkedList(){       // constructor
      first = null;
      gua_le = null;
   }

   public boolean isEmpty(){ return first == null; }
   public void insertFirst(Coordinate coord){
      Link newLink = new Link(coord);
      newLink.next = first;
      first = newLink;
   }

   public void insertFirst(Link theLink){      // override to accept Links
      theLink.next = first;
      first = theLink;
   }

   public Link delete(int c, int r){
      Link current = first, previous = first;
      while(current.data.c != c || current.data.r != r){     // find the Link
         if(current.next == null) return null;     // did not find
         else{                       // proceed to the next one
            previous = current;
            current = current.next;
         }
      }  // end while
      if(current == first) first = first.next;      // delete the first Link
      else previous.next = current.next;             // delete the Link
      return current;
   }

   public void delete(){        // override
      first = null;
   }

   public char find(int col, int row){
      Link current = first;
      Coordinate key = new Coordinate('z', col, row);
      while(!current.data.equals(key)){
         if(current.next==null) return 'z';     // did not find
         current = current.next;
      }
      return current.data.type;
   }



   public boolean bishopMove(char ch, int c, int r, int targetcol, int targetrow){
      if(Math.abs(c-targetcol) != Math.abs(r-targetrow)) return false;   // can't go there
      Coordinate theBishop = new Coordinate(ch, c, r);
      Link current = first;
      Coordinate target = new Coordinate('z', 0, 0);
      Link destination = new Link(target);
      while(current.next != null){
         if(current.data.c == targetcol && current.data.r == targetrow){
            target.type = current.data.type;
            target.c = targetcol;
            target.r = targetrow;
            destination.data = target;
         }
         if(current.data.type==ch){
            current = current.next;
            continue;
         }
         if(
            (current.data.c - theBishop.c == current.data.r - theBishop.r ||
            current.data.c - theBishop.c == theBishop.r - current.data.r) 
            &&
               (
               ((current.data.c > targetcol) && (current.data.r < theBishop.r) 
               ||
               (current.data.c < targetcol) && (current.data.r > theBishop.r))
               )
            )
         {
            return false;
         }  // end if
         current = current.next;
      }  // end while

      if(current.data.c == targetcol && current.data.r == targetrow){
         target.type = current.data.type;
         target.c = targetcol;
         target.r = targetrow;
         destination.data = target;
      }
      if(
         (current.data.c - theBishop.c == current.data.r - theBishop.r ||
         current.data.c - theBishop.c == theBishop.r - current.data.r) 
         &&
            (
            ((current.data.c > targetcol) && (current.data.r < theBishop.r) 
            ||
            (current.data.c < targetcol) && (current.data.r > theBishop.r))
            )
         )
      {            // check for the last one
         return false;
      }  // end if
      /* Up to here, there is no block on the half way */
      /* Check for destination square */
      
      if(destination.data.type == 'z'){      // mei_ren, sui_bian_she
         return true;
      }else if((destination.data.type-95) * (theBishop.type-95) < 0){
         gua_le = destination.data;           // gei_wo_wang_si_li_nong
         return true;
      }else                     // zi_ji_ren, bie_kai_qiang
         return false;
   }


/*
 *
 *
 *    public boolean rookAttack(char ch, int c, int r){
 *          Coordinate theRook = new Coordinate(ch, c, r);
 *                Link current = first;
 *                      while(current.next != null){
 *                               if(current.data.type==ch){
 *                                           current = current.next;
 *                                                       continue;
 *                                                                }
 *                                                                         if(current.data.c == theRook.c || current.data.r == theRook.r){
 *                                                                                     switch(ch){
 *                                                                                                    case 'R':
 *                                                                                                                      if(current.data.type == 'k' || current.data.type == 'q' || current.data.type == 'r'
 *                                                                                                                                           || current.data.type == 'b' || current.data.type == 'n')
 *                                                                                                                                                                return true;
 *                                                                                                                                                                                  break;
 *
 *                                                                                                                                                                                                 case 'r':
 *                                                                                                                                                                                                                   if(current.data.type == 'K' || current.data.type == 'Q' || current.data.type == 'R'
 *                                                                                                                                                                                                                                        || current.data.type == 'B' || current.data.type == 'N')
 *                                                                                                                                                                                                                                                             return true;
 *                                                                                                                                                                                                                                                                               break;             
 *                                                                                                                                                                                                                                                                                           }  // end switch
 *                                                                                                                                                                                                                                                                                                    }  // end if
 *                                                                                                                                                                                                                                                                                                             current = current.next;
 *                                                                                                                                                                                                                                                                                                                   }  // end while
 *
 *                                                                                                                                                                                                                                                                                                                         if(current.data.type==ch) return false;
 *                                                                                                                                                                                                                                                                                                                               if(current.data.c == theRook.c || current.data.r == theRook.r){
 *                                                                                                                                                                                                                                                                                                                                        switch(ch){
 *                                                                                                                                                                                                                                                                                                                                                    case 'R':
 *                                                                                                                                                                                                                                                                                                                                                                   if(current.data.type == 'k' || current.data.type == 'q' || current.data.type == 'r'
 *                                                                                                                                                                                                                                                                                                                                                                                     || current.data.type == 'b' || current.data.type == 'n')
 *                                                                                                                                                                                                                                                                                                                                                                                                       return true;
 *                                                                                                                                                                                                                                                                                                                                                                                                                      break;
 *
 *                                                                                                                                                                                                                                                                                                                                                                                                                                  case 'r':
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                 if(current.data.type == 'K' || current.data.type == 'Q' || current.data.type == 'R'
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                   || current.data.type == 'B' || current.data.type == 'N')
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     return true;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    break;             
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             }  // end switch
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   }
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         return false;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }
 *
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               public boolean queenAttack(char ch, int c, int r){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     switch(ch){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              case 'Q':
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          return (rookAttack('R', c, r) || bishopAttack('B', c, r));
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   case 'q':
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               return (rookAttack('r', c, r) || bishopAttack('b', c, r));
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     }
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           return false;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              }
 *
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 public boolean kingAttack(char ch, int c, int r){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       Coordinate theKing = new Coordinate(ch, c, r);
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             Link current = first;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   while(current.next != null){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if(current.data.type==ch){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        current = current.next;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    continue;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             }
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if(current.data.c == theKing.c && (current.data.r - theKing.r == 1  ||
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  theKing.r - current.data.r == 1) || current.data.r == theKing.r &&
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              (current.data.c - theKing.c == 1 || theKing.c - current.data.c ==1)
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          || ((theKing.c - current.data.c == 1 || current.data.c - theKing.c == 1)
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      && (theKing.r - current.data.r == 1 || current.data.r - theKing.r == 1))){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  switch(ch){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 case 'K':
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   if(current.data.type == 'k' || current.data.type == 'q' || current.data.type == 'r'
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        || current.data.type == 'b' || current.data.type == 'n')
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             return true;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               break;
 *
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              case 'k':
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if(current.data.type == 'K' || current.data.type == 'Q' || current.data.type == 'R'
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     || current.data.type == 'B' || current.data.type == 'N')
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          return true;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            break;             
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        }  // end switch
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 }  // end if
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          current = current.next;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }  // end while
 *
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if(current.data.type==ch) return false;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if(current.data.c == theKing.c && (current.data.r - theKing.r == 1  ||
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     theKing.r - current.data.r == 1) || current.data.r == theKing.r &&
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              (current.data.c - theKing.c == 1 || theKing.c - current.data.c ==1)
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       || ((theKing.c - current.data.c == 1 || current.data.c - theKing.c == 1)
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                && (theKing.r - current.data.r == 1 || current.data.r - theKing.r == 1))){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         switch(ch){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     case 'K':
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if(current.data.type == 'k' || current.data.type == 'q' || current.data.type == 'r'
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      || current.data.type == 'b' || current.data.type == 'n')
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        return true;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       break;
 *
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   case 'k':
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  if(current.data.type == 'K' || current.data.type == 'Q' || current.data.type == 'R'
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    || current.data.type == 'B' || current.data.type == 'N')
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      return true;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     break;             
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              }  // end switch
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }  // end if
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          return false;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             }
 *
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                public boolean knightAttack(char ch, int c, int r){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Coordinate theKnight = new Coordinate(ch, c, r);
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Link current = first;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  while(current.next.next != null){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           if(current.data.type==ch){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       current = current.next;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   continue;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     if(((current.data.c - theKnight.c == 2 || current.data.c - theKnight.c == -2) &&
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 (current.data.r - theKnight.r == 1 || theKnight.r - current.data.r == 1)) ||
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ((current.data.r - theKnight.r == 2 || current.data.r - theKnight.r == -2) &&
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         (current.data.c - theKnight.c == 1 || theKnight.c - current.data.c ==1))){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     switch(ch){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    case 'N':
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if(current.data.type == 'k' || current.data.type == 'q' || current.data.type == 'r'
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           || current.data.type == 'b' || current.data.type == 'n')
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return true;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  break;
 *
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 case 'n':
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   if(current.data.type == 'K' || current.data.type == 'Q' || current.data.type == 'R'
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        || current.data.type == 'B' || current.data.type == 'N')
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             return true;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               break;             
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           }  // end switch           
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }  // end if
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             current = current.next;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   }  // end while
 *
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         if(current.data.type==ch) return false;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               if(((current.data.c - theKnight.c == 2 || current.data.c - theKnight.c == -2) &&
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        (current.data.r - theKnight.r == 1 || theKnight.r - current.data.r == 1)) ||
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ((current.data.r - theKnight.r == 2 || current.data.r - theKnight.r == -2) &&
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          (current.data.c - theKnight.c == 1 || theKnight.c - current.data.c ==1))){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   switch(ch){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               case 'N':
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              if(current.data.type == 'k' || current.data.type == 'q' || current.data.type == 'r'
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                || current.data.type == 'b' || current.data.type == 'n')
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  return true;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 break;
 *
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             case 'n':
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if(current.data.type == 'K' || current.data.type == 'Q' || current.data.type == 'R'
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              || current.data.type == 'B' || current.data.type == 'N')
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return true;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               break;             
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        }  // end switch           
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              }  // end if
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    return false;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       }
 *
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          public boolean pawnAttack(char ch, int c, int r){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Coordinate thePawn = new Coordinate(ch, c, r);
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Link current = first;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            while(current.next.next != null){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     if(current.data.type==ch){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 current = current.next;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             continue;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               switch(ch){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           case 'P':
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if((thePawn.r - current.data.r == 1 && (thePawn.c - current.data.c == 1 ||
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            current.data.c - thePawn.c == 1)) && current.data.type > 95)
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              return true;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             break;
 *
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         case 'p':
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if((current.data.r - thePawn.r == 1 && (thePawn.c - current.data.c == 1 ||
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          current.data.c - thePawn.c == 1)) && current.data.type < 95)
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            return true;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           break;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }  // end switch
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             current = current.next;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   }  // end while
 *
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         if(current.data.type == ch) return false;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               else if((thePawn.r - current.data.r == 1 && (thePawn.c - current.data.c == 1 ||
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     current.data.c - thePawn.c == 1)) && current.data.type > 95){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              if(ch == 'P') return true;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }else if((current.data.r - thePawn.r == 1 && (thePawn.c - current.data.c == 1 ||
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          current.data.c - thePawn.c == 1)) && current.data.type < 95){
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   if(ch == 'p') return true;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         }  // end if-else
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               return false;
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  }
 *
 *
 *
 *
 *
 *
 *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  */

}




class ChessMoves{
   static LinkedList chess = new LinkedList();   // the most important thing in this prog.

   public static void main(String[] args) throws IOException{
      if(args.length != 2){
         System.out.println("Usage: java -jar ChessBoard.jar <input file><output file>.");
         System.exit(1);
      }

      Scanner sc = new Scanner(new File(args[0]));
      PrintWriter out = new PrintWriter(new FileWriter(args[1]));

      while(sc.hasNextLine()){
         String nextLine = sc.nextLine();   // store the whole line
         int lineLen = nextLine.length();   // the length of the line
         char currentChar = 'z';       // take one char from the current line
         int colonPosition = 0;        // the position of the colon

         for(int outer=0; outer<lineLen; outer += 6){
            Link nextChess = new Link(new Coordinate('z', 0, 0));   // initialize
            for(int inner=0; inner<6; inner++){
               currentChar = nextLine.charAt(outer + inner);
               if(currentChar == ':'){      // All chesses are placed on the board
                  colonPosition = outer+inner;
                  break;
               }
               if(inner==0) nextChess.data.type = currentChar;
               if(inner==2) nextChess.data.c = Character.getNumericValue(currentChar) - 1;
               if(inner==4) nextChess.data.r = Character.getNumericValue(currentChar) - 1;
            }  // end inner for
            if(currentChar == ':') break;    // finish inputting chess locations
            chess.insertFirst(nextChess);
         }  // end outer for

         /* To this point, all chessBoard information is stored in the list */

         int[] startPos = new int[2];
         int[] endPos = new int[2];

         System.out.println(colonPosition + " " + lineLen);

         for(int move=colonPosition+1; move<lineLen; move += 8){
            startPos[0] = Character.getNumericValue(nextLine.charAt(move+1)) - 1;
            startPos[1] = Character.getNumericValue(nextLine.charAt(move+3)) - 1;
            endPos[0] = Character.getNumericValue(nextLine.charAt(move+5)) - 1;
            endPos[1] = Character.getNumericValue(nextLine.charAt(move+7)) - 1;

            System.out.println(startPos[1] + " " + endPos[1]);

            if(chess.bishopMove('b', startPos[0], startPos[1], endPos[0], endPos[1])){
               out.println("Legal");
            }else{
               out.print(startPos[0]+1 + " " + startPos[1]+1 + " ");
               out.print(endPos[0]+1 + " " + endPos[1]+1 + " illegal");
               out.flush();
            }
         }

         chess.delete();
      }   // end while (proceed to the next line of input)

      sc.close();
      out.close();
   }  // end main
}  // end class




